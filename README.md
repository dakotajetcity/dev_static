# 静的サイト用テンプレート
bowerやgulpの設定ファイルをまとめた制作環境構築テンプレートです。

# 前提条件
- node.js
- Ruby
- bowerのグローバルインストール
- gulpのグローバルインストール

# 環境構築
1. ターミナルを開いて作業ディレクトリにしたいところまで移動する。
2. 下記コマンドをターミナルに打ち込む。
```shell
$ git clone https://github.com/RyuyaShingaki/dev_static.git
```

3. dev_staticというディレクトリが作成されているのを確認する。  
   その中が作業ディレクトリとなります。
4. dev_static下へ移動します。
```shell
$ cd dev_static/
```

5. ls打ってbower.json, gulpfile.js, package.json等があるのを確認します。
6. 下記コマンドを打ち込んで30秒ほど待ちます。
```shell
$ npm i && bower i
```

7. 環境が出来上がりました＼(^o^)／

# 初期設定
1. gulpfile.jsが同じ階層にあるのを確認します。なければ移動してください。
2. 以下コマンドを打ち込みます。
```shell
$ gulp bower
```

3. 必須ライブラリーが自動でインストールされました＼(^o^)／

# 各種ディレクトリ・ファイルの役割
まずディレクトリ構成から説明します。
```shell
dev_static/
├─ bower.json           # bowerの設定ファイル。気にしなくていい
├─ gulpfile.js          # gulpのタスクを設定しているファイル。気にしなくていい
├─ package.json         # gulpの設定ファイル。気にしなくていい
├─ README.md            # 今見ているドキュメントです
├─ .git/                # gitの設定群です。気にしなくていい
├─ .gitignore           # gitの設定ファイルその2です。気にしなくていい
├─ bower_components/    # bowerの主要ファイル群です。気にしなくていい
├─ node_modules/        # node.jsの主要ファイルです。gulpとかもここにあります。気にしなくていい
└─ src/
    ├─ index.html       # サンプルとして置いてあります。headの設定をよく読みましょう。
    ├─ assets/          # 製作時に使用するディレクトリです。
    │  ├─ css/          # 製作時のCSSを格納するディレクトリです。
    │  ├─ images/       # 製作時の画像を格納するディレクトリです。
    │  ├─ js/           # 製作時のJavaScriptを格納するディレクトリです。
    │  └─ sass/         # Sass(Scss)ファイルを格納するディレクトリです。
    └─ dist/            # 本番環境に使用するディレクトリです。
        └─ images/      # 本番環境の画像を格納するディレクトリです。
```


## 実際に使用するディレクトリ
実際にエディターを使用して作業する箇所はsrc以下のファイル群のみです。  
次にsrcのディレクトリassets, distの詳細説明に入ります。

### assetsディレクトリとは？
製作時のファイルを格納するディレクトリです。  
基本的に製作時は圧縮やファイルが結合されていない状態のほうがソースの確認がしやすいので、  
このディレクトリーにあるファイルはほぼ全て改行やコメントを残すようにします。  
また単体では機能しないSassファイル等もこちらに入れています。  

### distディレクトリとは？
本番環境のファイルを格納するディレクトリです。  
ここに入るファイルはサイトにアップするファイル群になりますので、  
納品前に出来る限りファイルの容量を小さくするためにコメントや改行をなくした圧縮を施すことになります。  
デフォルトでは何もありませんが、gulp watchを実行しすると  
dist/css/  
dist/images/  
dist/js/  
のようにディレクトリが自動的に作られassetsのファイルがそれぞれ適切なディレクトリへ入るようになっています。ちなみに現在画像の圧縮等はgulpで設定していないのでasssetsディレクトリに入れなくてもよいのですがsassでbackground等を指定する際に予測変換が出来なくなるので画像もassetsディレクトリに入れましょう。gulpで勝手にdistディレクトリに格納しますので大丈夫です。

## 実際に使用するファイル
### HTML
src下にどんどん追加して構いません。  
画像のURL指定はdist/images/にしましょう。  

### CSS
assets/sass/style.scssにcssの記述を行ってください。  
Sassの記述が分からなくても.scss拡張子なら通常のCSSをちゃんと認識してくれます。  
少しずつSassの記述を覚えていって、効率的にCSSを書ければと思います。  
ちなみにstyle.scssはgulp watchしていないと自動コンパイルしてくれませんのでそれを忘れないように。コンパイルされたCSSはassets/css/style.cssに格納されています。  
確認用にご活用ください。

### JavaScript
assets/js/script.jsに記述を行ってください。

### images
assets/images/にどんどん追加して構いません。  
基本的に、画像はページ毎にディレクトリ分けしましょう。  
共通する画像はcommonディレクトリを作成してそこにまとめちゃいましょう。  
gulp watchを実行している状態であればほぼリアルタイムに画像がdist/images/下に格納されていきます。


#  テンプレートの使い方
gulpのコマンドはgulpfile.jsが存在するディレクトリでしかターミナルコマンドを受け付けません。ターミナルの階層をdev_staticに移動しておきましょう。

テンプレートの様々な自動化処理はGulp.jsを使用して行われています。  
ちなみにgulpの各種コマンドは作成したユーザーによって違うのでgulpをインストールしたからといって必ずしも同じ処理をしてくれるわけではないことに注意してください。

## gulpのコマンド

基本的に製作を始める前に下記コマンドを実行しておいてください。
  ```shell
  $ gulp watch
  ```
  このコマンドだけでCSSのベンダープレフィックスも自動的に付けるようにしてます。  
  なので基本はW3Cに従った記述で大丈夫です。  
  gulp watchのキャンセルは ctrl + C になります。
  <br>

gulp watchの機能に、ブラウザの自動リロードも行って欲しい場合は以下のコマンドになります。
```shell
$ gulp
```

※キャンセルは ctrl + C です
 <br>

納品します！ファイルの圧縮 & 結合しなきゃ…それも下記コマンドを実行してください。
```shell
$ gulp opt
```
ソースの圧縮・結合を自動的に行い適切なディレクトリに格納してくれます。
<br>
<br>
<br>
そのうち画像の圧縮やスプライト画像の自動生成等のコマンドも追加していきます…  
以上
